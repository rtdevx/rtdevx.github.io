name: Resize photography debug

on:
  workflow_dispatch:

jobs:
  debug-resize:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Show photography files
        run: |
          echo "PWD: $(pwd)"
          echo "Listing content/photography (top-level)"
          ls -la content || true
          ls -la content/photography || true
          echo "Find matching image files (case-insensitive)"
          find content/photography -type f \( -iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.png' -o -iname '*.webp' \) -print || true
      - name: Resize images (debug)
        uses: gonzalonaveira/gh-image-resizing@master
        with:
          IMAGES_MAX_WIDTH: 400
          IMAGES_QUALITY: 90
          IMAGES_FORMATS: "jpg,jpeg,png,webp"
          IMAGES_DIRECTORIES: "content/photography"
          IMAGES_SUFFIX: "-resized"
          DEBUG: true

      - name: Show resized files and git status
        run: |
          echo "List any resized files"
          find content/photography -type f -iname '*-resized.*' -print || true
          echo "List any new/modified files"
          git status --porcelain || true
          echo "Show last 200 lines of action container logs (if any)"
          # no universal way to fetch container logs from inside job; check the action step logs in the UI
